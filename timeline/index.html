<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
    <!--320-->
    <title>Timeline Expert</title>
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/style.css">
    <meta name="description" content="A simple trivia to guess who tweeted what on your Twitter timeline without seeing the handle.">
    <meta name="keywords" content="twitter, timeline, guess, guessing, game, trivia">
    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Timeline Expert">
    <meta name="twitter:description" content="A simple trivia to guess who tweeted what on your Twitter timeline without seeing the handle.">
    <meta name="twitter:image" content="http://timeline.expert/img/preview.png">
    <!-- Open Graph data -->
    <meta property="og:title" content="Timeline Expert" />
    <meta property="og:type" content="game" />
    <meta property="og:url" content="http://timeline.expert" />
    <meta property="og:image" content="http://timeline.expert/img/preview.png" />
    <meta property="og:description" content="A simple trivia to guess who tweeted what on your Twitter timeline without seeing the handle." />
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-98606919-1', 'auto');
    ga('send', 'pageview');
    </script>
</head>

<body>
    <div id="app">
        <router-view></router-view>
    </div>
    <!-- Login Module -->
    <script type="text/x-template" id="Login">
        <div>
            <header>
                <div class="logo">
                    <div class="logo__text">Timeline</div>
                    <div class="logo__mark">‘</div>
                </div>
            </header>
            <section class="intro animated fadeInUp">
                <h1 class="intro__text">How well do you know your timeline?</h1>
                <a class="intro__button" v-on:click="authenticate">Login</a>
            </section>
        </div>
    </script>
    <!-- Game Module -->
    <script type="text/x-template" id="Game">
        <div>
            <header class="gameHeader" v-on:click="profileVisible = !profileVisible">
                <div class="logo">
                    <div class="logo__text">Timeline</div>
                </div>
                <div class="gameHeader__toggle">
                    <span v-bind:class="profileVisible ? 'up' : 'down'"></span>
                </div>
            </header>
            <section class="profile" v-bind:class="{ 'profile--visible': profileVisible }">
                <div class="profile__score">
                    <p>Hi {{stats.nickname}}, your score is</p>
                    <h3 v-if="stats.answered_count > 0">{{filters.percentage(stats.correct_count / stats.answered_count)}}</h3>
                    <h3 v-else>0%</h3>
                    <p>You’ve guessed <b>{{stats.correct_count}}</b> out of <b>{{stats.answered_count}}</b> tweets correctly</p>
                </div>
                <div class="profile__links">
                    <a target="_blank" v-bind:href="twitterUrl">Tweet my score</a>
                    <a href="http://helloworld.ng" target="_blank">Helloworld.ng</a>
                    <a v-on:click.prevent="logout">Logout</a>
                </div>
            </section>
            <div v-if="!isLoading && questions">
                <question v-bind:data="questions" v-bind:index="currentIndex" v-on:answered="updateCount" v-on:next="nextQuestion"></question>
            </div>
            <div class="loader" v-if="isLoading"></div>
        </div>
    </script>
    <!-- Question Module -->
    <script type="text/x-template" id="Question">
        <div>
            <section class="tweet" v-bind:class="{ 'tweet--beingAnswered': answersVisible }" v-if="data">
                <div class="tweet__body animated fadeInUp" v-bind:class="{ 'fadeInUp': isLoading, 'fadeOutUp': isExiting }">
                    <h2 class="tweet__text">{{filters.decode(question.body)}}</h2>
                    <p class="tweet__date">{{formatTime(question.date)}}</p>
                </div>
            </section>
            <section class="answers animated" v-if="answersVisible" v-bind:class="{ 'fadeOutDown': isExiting }">
                <form>
                    <div class="animated stack fadeInUp" v-for="option in question.options">
                        <button class="option" v-bind:class="{ 'option__isInvalid': isAnswered && !option.correct, 'option__isCorrect': isAnswered && option.correct, 'option__isWrong': isAnswered && option == answer && !option.correct }" v-on:click.prevent="choose(option)">@{{option.username}}</button>
                    </div>
                </form>
                <div class="answers__base" v-if="!isAnswered">
                    <a class="right" v-on:click="next">Skip</a>
                </div>
                <div class="answers__base" v-if="isAnswered">
                    <a class="left" v-bind:href="question.url" target="_blank">Link to Tweet</a>
                    <span class="right">{{count}}</span>
                </div>
            </section>
        </div>
    </script>
    <!-- Dependencies -->
    <script src="https://unpkg.com/vue@2.1.1/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router@2.1.1/dist/vue-router.js"></script>
    <script src="js/vendor/moment.min.js"></script>
    <script src="js/vendor/fetch.js"></script>
    <script src="js/app.js"></script>
</body>

</html>
